# Milestone 4 Reflection

### Functionality 
The Happiness Navigator app allows users to visualize how countries around the world compare against one another using a global happiness score based on a number of happiness indicators from the [World Happiness Report](https://worldhappiness.report/ed/2020/). The app provides slider inputs for each metric that allow the user to scale the happiness features that are most important to them personally and outputs how each country ranks. These six sliders and their values then update both the world choropleth map heatmap values and the top ten country table score and ranks based on the recalculated happiness scores with the new metric proportions. Individual countries on the map can be clicked on and this, in turn, updates the dropdown menu and populates the line graph and the bar chart directly below to view specific countries of interest. This line graph shows the yearly trends for selected countries and a selected feature of interest and how it has changed over the course of the data. At the same time, the bar chart compares the 2020 happiness scores for two or more countries, showing the happiness rank of each country when the user hovers over the bar. When only one country is selected on the map or in the map dropdown menu, the bar chart displays a trend in the happiness score for that country from 2015 to 2020. By default, when no country is selected the line graph and the bar chart show the global average happiness score.

### Addressing Feedback
We found instructor, TA, and peer feedback very helpful to improving the dashboard. Some key insights were on simplifying and rearranging the layout of the components to connect the functionality spatially and logically. Specifically, we've simplified the milestone 4 version of the app to the key components; a map, two concise graphs representing only selected country data, and subsetted data table instead a list of all the countries. For the happiness algorithm, we have updated the happinss result to take into account better normalization and scaling of the data to align with the ranges of the plot scales and user assumptions. Finally, we used design feedback about component positions and color schemes to try to tie the whole dashboard together and achieve our stated user story.

One piece of feedback we were partially unable to address was the use of a stacked bar chart to represent the composition of the happiness scores for the selected countries at the expense of the ranking table. We have updated the bar plot to provide comparison of the selected countries to avoid duplication of the information in the data table. Unfortunately, due to time constraints we decided against implementing the stacked happiness metric bar chart given the review time on February 5th, and erred on the side of caution to avoid introducing new bugs for milestone 4 release on February 6th. This feature has been included in the improvements section!

### Improvements
* Implement a stacked bar chart to represent the metric breakdown of each happiness score
* Update the underlying happiness calculations to use the data from all years except 2020. This was done because the metric units and scales seemed to change year to year in the raw datasets, so 2020 was used as the best compromise.
* Look into a new plot them for all plotted components to continue tying the whole dashboard together with the theme.

### R vs. Python
We decided to use R because of our discovery in Milestone 2 that Python for Dash did not have a system for returning map callbacks values to Dash for updating other components. This limitation would have required us to contain all plot items linked with the map into one Altair plot, which would have seriously limited our design and layout options. Furthermore, it would have integration back to the dash slider and dropdown components unfeasible in some cases and unwieldy in others. Additionaly, the selectable choropleth map provided by GGPlotly provided more functionality and an improved user interface with zooming and scrolling over the Altair version. For our purposes Dash-R was the logical choice.

While the choice due to functionlity was easy, we discovered a number of drawbacks to using Dash-R over the Python implementation. One major downside of using Dash with R was that there was far less reference documentation and code examples. For instance, the dashtable component in Python has a component option to disable clicking, while in R an undocumented hack was required to disable this. Another example would be dealing with the circular callbacks that we encountered often in our app, where all of the reference examples and dash_extensions library are only available in Python.

### Unresolved Issues
We encountered some device, browser, and OS specific behaviour while each of us were developing using different configuration setups. One thing we noticed is that the representation of the table frame and its header on our dashboard differs between users. For example, the current version of the table is displayed normally on Windows using Microsoft Edge, while on MacBook Pro 13â€³ using Google Chrome the borders of the table are shown thinner in comparison to the other dbcCard embedded objects.

For the Heroku continuous integration deployment, we followed the instructions provided [here](https://devcenter.heroku.com/articles/github-integration-review-apps) and in Slack, but were unable to overcome the issues encountered. Our repo deployment branch is available [here](https://github.com/UBC-MDS/dash_of_spice-R/tree/deployment), but it is not currently performing automated app reviews.
